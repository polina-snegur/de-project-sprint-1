# Качество данных

Для соблюдения баланса между эффективностью и потраченным временем не будем исследовать и исправлять проблемы в таблицах/полях, которые не понадобятся для решения задачи. Для решения задачи необходимо проверить качество данных только в таблице orders.

Рассмотрим таблицу orders поподробнее. Для этого обратимся к DDL-скрипту:

* order_id int4 NOT NULL - уникальный идентификатор заказа (стоит ограничение на NULL-значения);
* order_ts timestamp NOT NULL - максимальное время по заказу, согласно таблице логов orderstatuslog (стоит ограничение на NULL-значения);
* user_id int4 NOT NULL - уникальный идентификатор клиента (стоит ограничение на NULL-значения);
* bonus_payment numeric(19, 5) NOT NULL DEFAULT 0 - величина скидки в денежных единицах (стоит ограничение на NULL-значения, устанавливается значение 0 по дефолту);
* payment numeric(19, 5) NOT NULL DEFAULT 0 - величина оплаты для клиента (стоит ограничение на NULL-значения, устанавливается значение 0 по дефолту);
* "cost" numeric(19, 5) NOT NULL DEFAULT 0 - стоимость заказа, сумма payment и bonus_payment (стоит ограничение на NULL-значения, устанавливается значение 0 по дефолту);
* bonus_grant numeric(19, 5) NOT NULL DEFAULT 0 - бонус, равный 1% от стоимости заказа (стоит ограничение на NULL-значения, устанавливается значение 0 по дефолту);
* status int4 NOT NULL - категория статуса заказа с расшифровкой в таблице orderstatuses (стоит ограничение на NULL-значения).

Качество данных:

- Определение дублей

Так как в таблице orders установлени первичный ключ по полю order_id, то дубликатов в таблице быть не может. После проверки общее количество записей = 10000, с количеством уникальных значений по ключу = 10000.

- Поиск пропущенных значений

Из DDL выше видно, что у каждого поля есть ограничение на запрет ввода NULL-значений. Значит, пропусков в данных таблицы orders быть не может.

- Типы и форматы данных

Типы данных корректные.
Для поля order_ts выбран верный тип данных timestamp, что позволит посчитать разницу во времени с текущей датой.
Для поля payment также установлен числовой тип данных numeric, что позволит посчитать сумму оплат по заказам клиентов.

- Ограничения, как инструмент обеспечения качества данных

Были использованы следующие типы ограничений:
 
* ограничение-проверка для поля cost (CONSTRAINT orders_check CHECK ((cost = (payment + bonus_payment))));
* ограничения NOT NULL для всех полей таблицы orders;
* ограничение по первичному ключу по столбцу order_id (CONSTRAINT orders_pkey PRIMARY KEY (order_id)).